<!DOCTYPE html>
<html>
<head>
<title>Dribbble2x - Dribbble @2x Viewer(Alpha)</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="jribbble.js" type="text/javascript"></script>
</head>
<body>
<div class='body'>
  <div class='shot-list'></div>
  <div class='pagecounter'></div>
  <div class='preloader'>
    Loading..
  </div>
</div>

<script>
  var player = 'gilhyun';
  var load_shot, load_state, page_state;
  
  jQuery(function() {
    load_shot(player, '1');
    return $(window).scroll(function() {
      if ($(window).scrollTop() === $(document).height() - $(window).height() && load_state) {
        return load_shot(player, page_state);
      }
    });
  });
  
  page_state = 1;
  
  load_state = true;
  
  load_shot = function(player, page) {
    var callback;
    load_state = false;
    callback = function(listDetails) {
      var html, pagecounter;
      html = "";
      $.each(listDetails.shots, function(i, shot) {
        html += "<li>";
        html += "  <div class='user'>";
        html += "    <a href='" + shot.player.url + "'>";
        html += "      <img src='" + shot.player.avatar_url + "' class='avatar' alt='" + shot.player.name + "'>";
        html += "      by " + shot.player.name;
        html += "    </a>";
        html += "  </div>";
        html += "  <div class='shot size-" + shot.width + "'>";
        html += "    <h3>" + shot.title + "</h3>";
        html += "    <a href='" + shot.url + "'>";
        html += "      <img src='" + shot.image_url + "' alt='" + shot.title + "'>";
        html += "    </a>";
        html += "    <ul class='info'>";
        html += "      <li>Comments " + shot.comments_count + "</li>";
        html += "      <li>Like " + shot.likes_count + "</li>";
        html += "      <li>View " + shot.views_count + "</li>";
        html += "      <li class='rebounds'>Rebounds " + shot.rebounds_count + "</li>";
        html += "    </ul>";
        html += "  </div>";
        return html += "</li>";
      });
      $(".shot-list").append(html);
      pagecounter = $(".pagecounter");
      return pagecounter.html(page).stop().show().animate({
        opacity: 1
      }, 200, function() {
        return pagecounter.animate({
          opacity: 0
        }, 800, function() {
          pagecounter.hide();
          return load_state = true;
        });
      });
    };
    $.jribbble.getShotsByPlayerId(player, callback, {
      page: page,
      per_page: 12
    });
    return page_state++;
  };
</script>
</body>
</html>